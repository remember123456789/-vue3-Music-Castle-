import{T as G,U as W,_ as H,v as K,u as V,f as Y,V as J,e as Q,H as X,a as Z,g as y,k as P,q as f,G as R,j as T,F as L,l as B,m as E,E as q,K as tt,B as x,A as U,i as et,C as nt,D as st}from"./index-f89ee6ce.js";/* empty css                */var $={exports:{}};(function(M,O){(function(a,t){M.exports=t()})(G,function(){return function(o){var a={};function t(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return o[e].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=o,t.c=a,t.i=function(e){return e},t.d=function(e,n,u){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:u})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=20)}([function(o,a,t){o.exports=!t(3)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(o,a){o.exports=function(t){return typeof t=="object"?t!==null:typeof t=="function"}},function(o,a){var t=o.exports={version:"2.4.0"};typeof __e=="number"&&(__e=t)},function(o,a){o.exports=function(t){try{return!!t()}catch{return!0}}},function(o,a){var t=o.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=t)},function(o,a,t){var e=t(11),n=t(16),u=t(18),c=Object.defineProperty;a.f=t(0)?Object.defineProperty:function(i,l,p){if(e(i),l=u(l,!0),e(p),n)try{return c(i,l,p)}catch{}if("get"in p||"set"in p)throw TypeError("Accessors not supported!");return"value"in p&&(i[l]=p.value),i}},function(o,a,t){a.__esModule=!0,a.default=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}},function(o,a,t){a.__esModule=!0;var e=t(8),n=u(e);function u(c){return c&&c.__esModule?c:{default:c}}a.default=function(){function c(s,i){for(var l=0;l<i.length;l++){var p=i[l];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),(0,n.default)(s,p.key,p)}}return function(s,i,l){return i&&c(s.prototype,i),l&&c(s,l),s}}()},function(o,a,t){o.exports={default:t(9),__esModule:!0}},function(o,a,t){t(19);var e=t(2).Object;o.exports=function(u,c,s){return e.defineProperty(u,c,s)}},function(o,a){o.exports=function(t){if(typeof t!="function")throw TypeError(t+" is not a function!");return t}},function(o,a,t){var e=t(1);o.exports=function(n){if(!e(n))throw TypeError(n+" is not an object!");return n}},function(o,a,t){var e=t(10);o.exports=function(n,u,c){if(e(n),u===void 0)return n;switch(c){case 1:return function(s){return n.call(u,s)};case 2:return function(s,i){return n.call(u,s,i)};case 3:return function(s,i,l){return n.call(u,s,i,l)}}return function(){return n.apply(u,arguments)}}},function(o,a,t){var e=t(1),n=t(4).document,u=e(n)&&e(n.createElement);o.exports=function(c){return u?n.createElement(c):{}}},function(o,a,t){var e=t(4),n=t(2),u=t(12),c=t(15),s="prototype",i=function(l,p,h){var b=l&i.F,D=l&i.G,k=l&i.S,S=l&i.P,C=l&i.B,A=l&i.W,w=D?n:n[p]||(n[p]={}),m=w[s],_=D?e:k?e[p]:(e[p]||{})[s],r,d,g;D&&(h=p);for(r in h)d=!b&&_&&_[r]!==void 0,!(d&&r in w)&&(g=d?_[r]:h[r],w[r]=D&&typeof _[r]!="function"?h[r]:C&&d?u(g,e):A&&_[r]==g?function(v){var N=function(I,j,z){if(this instanceof v){switch(arguments.length){case 0:return new v;case 1:return new v(I);case 2:return new v(I,j)}return new v(I,j,z)}return v.apply(this,arguments)};return N[s]=v[s],N}(g):S&&typeof g=="function"?u(Function.call,g):g,S&&((w.virtual||(w.virtual={}))[r]=g,l&i.R&&m&&!m[r]&&c(m,r,g)))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,o.exports=i},function(o,a,t){var e=t(5),n=t(17);o.exports=t(0)?function(u,c,s){return e.f(u,c,n(1,s))}:function(u,c,s){return u[c]=s,u}},function(o,a,t){o.exports=!t(0)&&!t(3)(function(){return Object.defineProperty(t(13)("div"),"a",{get:function(){return 7}}).a!=7})},function(o,a){o.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}},function(o,a,t){var e=t(1);o.exports=function(n,u){if(!e(n))return n;var c,s;if(u&&typeof(c=n.toString)=="function"&&!e(s=c.call(n))||typeof(c=n.valueOf)=="function"&&!e(s=c.call(n))||!u&&typeof(c=n.toString)=="function"&&!e(s=c.call(n)))return s;throw TypeError("Can't convert object to primitive value")}},function(o,a,t){var e=t(14);e(e.S+e.F*!t(0),"Object",{defineProperty:t(5).f})},function(o,a,t){var e,n,u;(function(c,s){n=[o,a,t(6),t(7)],e=s,u=typeof e=="function"?e.apply(a,n):e,u!==void 0&&(o.exports=u)})(this,function(c,s,i,l){Object.defineProperty(s,"__esModule",{value:!0});var p=b(i),h=b(l);function b(m){return m&&m.__esModule?m:{default:m}}var D=/\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?]/g,k=0,S=1,C={title:"ti",artist:"ar",album:"al",offset:"offset",by:"by"};function A(){}var w=function(){function m(_){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A;(0,p.default)(this,m),this.lrc=_,this.tags={},this.lines=[],this.handler=r,this.state=k,this.curLine=0,this._init()}return(0,h.default)(m,[{key:"_init",value:function(){this._initTag(),this._initLines()}},{key:"_initTag",value:function(){for(var r in C){var d=this.lrc.match(new RegExp("\\["+C[r]+":([^\\]]*)]","i"));this.tags[r]=d&&d[1]||""}}},{key:"_initLines",value:function(){for(var r=this.lrc.split(`
`),d=0;d<r.length;d++){var g=r[d],v=D.exec(g);if(v){var N=g.replace(D,"").trim();N&&this.lines.push({time:v[1]*60*1e3+v[2]*1e3+(v[3]||0)*10,txt:N})}}this.lines.sort(function(I,j){return I.time-j.time})}},{key:"_findCurNum",value:function(r){for(var d=0;d<this.lines.length;d++)if(r<=this.lines[d].time)return d;return this.lines.length-1}},{key:"_callHandler",value:function(r){r<0||this.handler({txt:this.lines[r].txt,lineNum:r})}},{key:"_playRest",value:function(){var r=this,d=this.lines[this.curNum],g=d.time-(+new Date-this.startStamp);this.timer=setTimeout(function(){r._callHandler(r.curNum++),r.curNum<r.lines.length&&r.state===S&&r._playRest()},g)}},{key:"play",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,d=arguments[1];this.lines.length&&(this.state=S,this.curNum=this._findCurNum(r),this.startStamp=+new Date-r,d||this._callHandler(this.curNum-1),this.curNum<this.lines.length&&(clearTimeout(this.timer),this._playRest()))}},{key:"togglePlay",value:function(){var r=+new Date;this.state===S?(this.stop(),this.pauseStamp=r):(this.state=S,this.play((this.pauseStamp||r)-(this.startStamp||r),!0),this.pauseStamp=0)}},{key:"stop",value:function(){this.state=k,clearTimeout(this.timer)}},{key:"seek",value:function(r){this.play(r)}}]),m}();s.default=w,c.exports=s.default})}])})})($);var ot=$.exports;const rt=W(ot);const F=M=>(nt("data-v-1b930c0c"),M=M(),st(),M),it={class:"container"},at={class:"left"},lt={style:{"font-size":"30px",color:"#2D2D2D"}},ut={style:{"font-size":"18px",color:"#909090","line-height":"18px",margin:"20px 0",display:"block"}},ct={style:{color:"#909090"}},ft={style:{color:"#2D2D2D"}},pt=F(()=>f("h1",{style:{width:"100px",height:"5px","border-left":"5px solid orangered",padding:"10px","line-height":"5px"}},"相似歌曲 ",-1)),dt={class:"smaill-Music"},ht={class:"item-music"},_t=["onClick"],gt={class:"center"},mt=F(()=>f("h1",{style:{"text-align":"center"}},"歌词",-1)),vt={class:"center-ci",style:{overflow:"auto"}},xt={key:1},yt={class:"right"},Et={class:"box-cover"},bt={class:"box-image"},Dt=["src"],St=F(()=>f("h1",{style:{width:"150px",height:"5px",padding:"10px","border-left":"5px solid orangered","line-height":"5px"}}," 包含这首歌的歌单",-1)),wt={class:"mv-comment"},Pt={class:"comment-text"},Tt=F(()=>f("div",{class:"text-info"},[f("h2",{style:{"font-size":"24px",color:"#2D2D2D"}},"评论"),f("span",{style:{"font-size":"14px",color:"#999999","margin-left":"20px","line-height":"35px"}},"共条评论")],-1)),Mt=F(()=>f("textarea",{name:"",id:"",cols:"30",rows:"10",placeholder:"期待你的神评论……"},null,-1)),Ot={class:"comment-user"},Rt={class:"box-image"},Nt=["src"],It={class:"box-info"},Ft={style:{color:"#999999","font-size":"14px","margin-top":"10px"}},kt={__name:"song",setup(M){const{proxy:O}=K(),o=V(),a=Y();let t=J(),e=Q({songs:[],songs_ar:"",songs_albue:"",smail_songs:[],pic_Url:"",lyric:"",lyr:!1,hotcomments:[],txt:[]});const n=async()=>{t.id=o.query.id;let s=await O.$http.getSongerInfo(o.query.id);if(s.code!==200)return O.$mes.error("获取数据失败");e.songs=s.songs[0],e.songs_ar=s.songs[0].ar[0].name,e.songs_albue=s.songs[0].al.name,e.pic_Url=s.songs[0].al.picUrl,t.pic=s.songs[0].al.picUrl,t.name=s.songs[0].ar[0].name,t.nameMusic=s.songs[0].name;let i=await O.$http.smialMusic(o.query.id);e.smail_songs=i.songs;let l=await O.$http.geciSmail(o.query.id);u(l.lrc.lyric);let p=await O.$http.getCommentMusic(o.query.id);e.hotcomments=p.comments},u=s=>{e.txt.length!=0&&(e.txt=[]),new rt(s,l=>{}).lines.forEach(l=>{e.txt.push(l.txt)})},c=s=>{a.push({name:"song",query:{id:s.id}})};return X(()=>{o.query.id&&n()}),Z(()=>{n()}),(s,i)=>{const l=q,p=tt;return y(),P(L,null,[f("div",it,[f("div",at,[R(l,{class:"box-left",style:{position:"relative"}},{default:T(()=>[f("h1",lt,x(E(e).songs.name),1),f("span",ut,x(E(e).songs_ar),1),f("span",ct,[U("专辑 "),f("em",ft,x(E(e).songs_albue),1)])]),_:1}),R(l,{class:"box-simail"},{default:T(()=>[pt,f("div",dt,[(y(!0),P(L,null,B(E(e).smail_songs,h=>(y(),P("span",ht,[f("p",{style:{color:"orangered","font-size":"14px",cursor:"pointer"},onClick:b=>c(h)},x(h.name),9,_t),f("span",null,x(h.album.artists[0].name),1)]))),256))])]),_:1})]),f("div",gt,[R(l,{class:"box-center"},{default:T(()=>[mt,f("div",vt,[E(e).txt.length!=0?(y(!0),P(L,{key:0},B(E(e).txt,h=>(y(),P("p",null,x(h),1))),256)):(y(),P("p",xt,"纯音乐，无歌词"))])]),_:1})]),f("div",yt,[R(l,{class:"box-right"},{default:T(()=>[f("div",Et,[f("div",bt,[f("img",{src:E(e).pic_Url,alt:""},null,8,Dt)])])]),_:1}),R(l,{class:"box-gedan"},{default:T(()=>[St]),_:1})])]),f("div",wt,[f("div",Pt,[Tt,Mt,R(p,{type:"warning"},{default:T(()=>[U("评论")]),_:1})]),f("div",Ot,[(y(!0),P(L,null,B(E(e).hotcomments,(h,b)=>(y(),et(l,{class:"box-commet",key:b},{default:T(()=>[f("div",Rt,[f("img",{src:h.user.avatarUrl,alt:""},null,8,Nt)]),f("div",It,[f("h2",null,x(h.user.nickname),1),f("span",null,x(h.content),1),f("p",Ft,x(h.time),1)])]),_:2},1024))),128))])])],64)}}},Lt=H(kt,[["__scopeId","data-v-1b930c0c"]]);export{Lt as default};
