import{_ as I,v as U,u as $,f as B,r as q,I as M,e as E,L,a as F,g as d,k as u,q as s,y as f,j as p,F as w,l as S,m as i,D as N,P as T,A as r,z,B as V,i as j,G as O,H as P}from"./index-16ebe1dd.js";const R=h=>{function _(c){const g=parseFloat(c[0]),t=parseFloat(c[1]);return g*60+t}let a=h.split(`
`),y=[];for(let c=0;c<a.length;c++){let t=a[c].split("]"),k=t[0].substring(1).split(":"),v={time:_(k),word:t[1]};y.push(v)}return y};const x=h=>(O("data-v-1dce99ae"),h=h(),P(),h),W={class:"container"},G={class:"left"},Y={style:{"font-size":"30px",color:"#2D2D2D"}},A={style:{"font-size":"18px",color:"#909090","line-height":"18px",margin:"20px 0",display:"block"}},J={style:{color:"#909090"}},K={style:{color:"#2D2D2D"}},Q=x(()=>s("h1",{style:{width:"100px",height:"5px","border-left":"5px solid orangered",padding:"10px","line-height":"5px"}},"相似歌曲 ",-1)),X={class:"smaill-Music"},Z={class:"item-music"},ss=["onClick"],es=x(()=>s("h1",null,"歌词",-1)),ts={key:1},os={class:"right"},ns={class:"box-cover"},ls={class:"box-image"},as=["src"],cs=x(()=>s("h1",{style:{width:"150px",height:"5px",padding:"10px","border-left":"5px solid orangered","line-height":"5px"}}," 包含这首歌的歌单",-1)),is={class:"mv-comment"},rs={class:"comment-text"},ds=x(()=>s("div",{class:"text-info"},[s("h2",{style:{"font-size":"24px",color:"#2D2D2D"}},"评论"),s("span",{style:{"font-size":"14px",color:"#999999","margin-left":"20px","line-height":"35px"}},"共条评论")],-1)),_s=x(()=>s("textarea",{name:"",id:"",cols:"30",rows:"10",placeholder:"期待你的神评论……"},null,-1)),us={class:"comment-user"},ps={class:"box-image"},hs=["src"],gs={class:"box-info"},ms={style:{color:"#999999","font-size":"14px","margin-top":"10px"}},fs={__name:"song",setup(h){const{proxy:_}=U(),a=$(),y=B(),c=q(),g=q();let t=M(),e=E({songs:[],songs_ar:"",songs_albue:"",smail_songs:[],pic_Url:"",lyric:"",lyr:!1,hotcomments:[],txt:[]});function k(o){return new Date(o).toLocaleString().replace(/\//g,"-")}const v=async()=>{t.id=a.query.id;let o=await _.$http.getSongerInfo(a.query.id);if(o.code!==200)return _.$mes.error("获取数据失败");e.songs=o.songs[0],e.songs_ar=o.songs[0].ar[0].name,e.songs_albue=o.songs[0].al.name,e.pic_Url=o.songs[0].al.picUrl,t.pic=o.songs[0].al.picUrl,t.name=o.songs[0].ar[0].name,t.nameMusic=o.songs[0].name;let m=await _.$http.smialMusic(a.query.id);e.smail_songs=m.songs;let n=await _.$http.geciSmail(a.query.id);C(n.lrc.lyric);let D=await _.$http.getCommentMusic(a.query.id);e.hotcomments=D.comments},C=o=>{const m=R(o);console.log(m),t.lyicWords=m,t.containerHeight=c.value.clientHeight,t.PHeight=g.value.children[0].clientHeight,e.txt.length!=0&&(e.txt=[]),m.forEach(n=>{e.txt.push(n.word)})},H=o=>{y.push({name:"song",query:{id:o.id}})};return L(()=>{a.query.id&&v(),t.Offset&&(g.value.style.transform=`translateY(-${t.Offset}px)`)}),F(()=>{v()}),(o,m)=>{const n=N,D=T;return d(),u(w,null,[s("div",W,[s("div",G,[f(n,{class:"box-left",style:{position:"relative"}},{default:p(()=>[s("h1",Y,r(i(e).songs.name),1),s("span",A,r(i(e).songs_ar),1),s("span",J,[z("专辑 "),s("em",K,r(i(e).songs_albue),1)])]),_:1}),f(n,{class:"box-simail"},{default:p(()=>[Q,s("div",X,[(d(!0),u(w,null,S(i(e).smail_songs,l=>(d(),u("span",Z,[s("p",{style:{color:"orangered","font-size":"14px",cursor:"pointer"},onClick:b=>H(l)},r(l.name),9,ss),s("span",null,r(l.album.artists[0].name),1)]))),256))])]),_:1})]),s("div",{class:"center",ref_key:"center",ref:c},[es,f(n,{class:"box-center"},{default:p(()=>[s("div",{class:"center-ci",style:{overflow:"auto"},ref_key:"lyricHeight",ref:g},[i(e).txt.length!=0?(d(!0),u(w,{key:0},S(i(e).txt,(l,b)=>(d(),u("p",{class:V([b==i(t).index?"active":""])},r(l),3))),256)):(d(),u("p",ts,"纯音乐，无歌词"))],512)]),_:1})],512),s("div",os,[f(n,{class:"box-right"},{default:p(()=>[s("div",ns,[s("div",ls,[s("img",{src:i(e).pic_Url,alt:""},null,8,as)])])]),_:1}),f(n,{class:"box-gedan"},{default:p(()=>[cs]),_:1})])]),s("div",is,[s("div",rs,[ds,_s,f(D,{type:"warning"},{default:p(()=>[z("评论")]),_:1})]),s("div",us,[(d(!0),u(w,null,S(i(e).hotcomments,(l,b)=>(d(),j(n,{class:"box-commet",key:b},{default:p(()=>[s("div",ps,[s("img",{src:l.user.avatarUrl,alt:""},null,8,hs)]),s("div",gs,[s("h2",null,r(l.user.nickname),1),s("span",null,r(l.content),1),s("p",ms,r(k(l.time)),1)])]),_:2},1024))),128))])])],64)}}},ys=I(fs,[["__scopeId","data-v-1dce99ae"]]);export{ys as default};
